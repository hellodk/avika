# Avika Platform - Environment Configuration
# Copy this file to .env and customize for your environment
# 
# Usage:
#   cp deploy/env.example deploy/.env
#   source deploy/.env
#   ./scripts/deploy-agent.sh

# =============================================================================
# GATEWAY CONFIGURATION
# =============================================================================

# Gateway gRPC address (for agent connections)
# Format: hostname:port or ip:port
# For Kubernetes: avika-gateway.avika.svc.cluster.local:5020
# For standalone: your-server-ip:5020
GATEWAY_SERVER="avika-gateway.avika.svc.cluster.local:5020"

# Multiple gateways (comma-separated) for high availability
# GATEWAYS="gateway1:5020,gateway2:5020,gateway3:5020"
GATEWAYS="${GATEWAY_SERVER}"

# =============================================================================
# UPDATE SERVER CONFIGURATION
# =============================================================================

# Update server URL (serves agent binaries and version info)
# For Kubernetes: http://avika-gateway.avika.svc.cluster.local:5021
# For standalone: http://your-server-ip:5021
UPDATE_SERVER="http://avika-gateway.avika.svc.cluster.local:5021"

# =============================================================================
# KUBERNETES CONFIGURATION
# =============================================================================

# Kubernetes namespace for Avika deployment
K8S_NAMESPACE="avika"

# Service names (used for internal DNS)
GATEWAY_SERVICE="avika-gateway"
FRONTEND_SERVICE="avika-frontend"
POSTGRESQL_SERVICE="avika-postgresql"
CLICKHOUSE_SERVICE="avika-clickhouse"

# =============================================================================
# PORTS (default values, change only if needed)
# =============================================================================

# Gateway ports
GATEWAY_GRPC_PORT="5020"
GATEWAY_HTTP_PORT="5021"

# Agent ports
AGENT_MGMT_PORT="5025"
AGENT_HEALTH_PORT="5026"

# Frontend port
FRONTEND_PORT="5031"

# =============================================================================
# EXTERNAL ACCESS (for documentation/scripts)
# =============================================================================

# External IP or hostname for accessing services from outside the cluster
# Set this to your actual server IP or load balancer address
# EXTERNAL_HOST="192.168.1.10"
EXTERNAL_HOST=""

# Derived URLs (used in documentation examples)
# These are only used when EXTERNAL_HOST is set
if [ -n "${EXTERNAL_HOST}" ]; then
    EXTERNAL_GATEWAY_GRPC="${EXTERNAL_HOST}:${GATEWAY_GRPC_PORT}"
    EXTERNAL_GATEWAY_HTTP="http://${EXTERNAL_HOST}:${GATEWAY_HTTP_PORT}"
    EXTERNAL_FRONTEND="http://${EXTERNAL_HOST}:${FRONTEND_PORT}"
fi
