â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           NGINX MANAGER - SERVICE MANAGEMENT                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸš€ QUICK START
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

# Start all services
./scripts/start.sh

# Check status
./scripts/status.sh

# Stop all services
./scripts/stop.sh

# Restart all services
./scripts/restart.sh


ğŸ“‹ AVAILABLE SCRIPTS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

scripts/start.sh          Start all services (Gateway, Agent, Frontend)
scripts/stop.sh           Stop all services gracefully
scripts/restart.sh        Restart all services
scripts/status.sh         Check status of all services
scripts/build-agent.sh    Build agent binary
scripts/docker-build.sh   Build and push Docker image
scripts/safe-push.sh      Push code to GitHub with security checks


ğŸ”§ SERVICE MANAGEMENT
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Start Services:
  ./scripts/start.sh
  
  Features:
  â€¢ Checks if services are already running
  â€¢ Creates logs/ directory automatically
  â€¢ Starts services in correct order (Gateway â†’ Agent â†’ Frontend)
  â€¢ Waits for services to be ready
  â€¢ Shows service URLs and PIDs

Stop Services:
  ./scripts/stop.sh
  
  Features:
  â€¢ Graceful shutdown (SIGTERM first)
  â€¢ Force kill after 10 seconds if needed
  â€¢ Stops in reverse order (Frontend â†’ Gateway â†’ Agent)
  â€¢ Shows remaining processes if any

Restart Services:
  ./scripts/restart.sh
  
  Features:
  â€¢ Stops all services
  â€¢ Waits 2 seconds
  â€¢ Starts all services

Check Status:
  ./scripts/status.sh
  
  Features:
  â€¢ Shows running/stopped status
  â€¢ Displays PID, uptime, CPU, memory
  â€¢ Checks port availability
  â€¢ Shows external dependencies (PostgreSQL, ClickHouse)
  â€¢ Displays recent logs


ğŸ“ LOG FILES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

All logs are stored in logs/ directory:

logs/gateway.log          Gateway service logs
logs/agent.log            Agent service logs
logs/frontend.log         Frontend (Next.js) logs

View logs in real-time:
  tail -f logs/gateway.log
  tail -f logs/agent.log
  tail -f logs/frontend.log

View all logs:
  tail -f logs/*.log


ğŸŒ SERVICE ENDPOINTS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Frontend:     http://localhost:3000
Gateway:      localhost:50051 (gRPC)
Agent:        localhost:50052 (gRPC)
PostgreSQL:   localhost:5432
ClickHouse:   localhost:8123 (HTTP), localhost:9000 (Native)


âš™ï¸  ENVIRONMENT VARIABLES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Agent:
  AGENT_ID=prod-nginx-agent    Agent identifier (default)

Gateway:
  DB_DSN=postgres://...         PostgreSQL connection string
  CLICKHOUSE_ADDR=localhost:9000  ClickHouse address

Frontend:
  GATEWAY_URL=http://localhost:50051  Gateway URL


ğŸ” TROUBLESHOOTING
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Service won't start:
  1. Check if port is already in use:
     netstat -tuln | grep -E "3000|50051|50052"
  
  2. Check logs for errors:
     tail -50 logs/gateway.log
     tail -50 logs/agent.log
     tail -50 logs/frontend.log
  
  3. Ensure dependencies are running:
     docker ps | grep -E "postgres|clickhouse"

Service won't stop:
  1. Try force stop:
     pkill -9 -f "./gateway"
     pkill -9 -f "./agent"
     pkill -9 -f "next dev"
  
  2. Check for zombie processes:
     ps aux | grep -E "gateway|agent|next" | grep -v grep

Port already in use:
  1. Find process using port:
     lsof -i :3000
     lsof -i :50051
  
  2. Kill the process:
     kill -9 <PID>


ğŸ“Š MONITORING
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Watch service status:
  watch -n 2 ./scripts/status.sh

Monitor resource usage:
  htop -p $(pgrep -d',' -f "gateway|agent|next")

Check service health:
  # Gateway
  grpcurl -plaintext localhost:50051 list
  
  # Frontend
  curl http://localhost:3000/api/servers


ğŸ”„ DEVELOPMENT WORKFLOW
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Make code changes
2. Rebuild binaries:
   go build -o gateway ./cmd/gateway
   go build -o agent ./cmd/agent
3. Restart services:
   ./scripts/restart.sh
4. Check status:
   ./scripts/status.sh
5. View logs:
   tail -f logs/*.log


ğŸ’¡ TIPS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â€¢ Always use scripts/ for service management (not pkill directly)
â€¢ Check status before starting to avoid duplicate processes
â€¢ Logs are automatically rotated (managed by nohup)
â€¢ Use ./scripts/status.sh to verify all services are healthy
â€¢ Frontend hot-reloads automatically (no restart needed for UI changes)
â€¢ Gateway and Agent require restart after code changes


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  For more information, see docs/ directory                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
